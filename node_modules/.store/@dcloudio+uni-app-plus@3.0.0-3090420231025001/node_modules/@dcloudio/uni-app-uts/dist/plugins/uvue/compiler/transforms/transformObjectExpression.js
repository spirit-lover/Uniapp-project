"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.transformObjectExpression = void 0;
const uni_cli_shared_1 = require("@dcloudio/uni-cli-shared");
const utils_1 = require("../utils");
const transformObjectExpression = (node, context) => {
    // 因为 v-bind without arg 是被 transformElements.ts 直接处理的，没办法在 vBind 中解析处理objectExpression
    // 所以 统一在这里拦截处理
    return function postTransformObjectExpression() {
        node = context.currentNode;
        if (!(0, uni_cli_shared_1.isElementNode)(node)) {
            return;
        }
        node.props.forEach((p) => {
            if (!(0, uni_cli_shared_1.isDirectiveNode)(p) || !p.exp) {
                return;
            }
            if (p.name === 'bind' || p.name === 'on') {
                const newExp = (0, utils_1.rewriteObjectExpression)(p.exp, context);
                if (newExp) {
                    p.exp = newExp;
                }
            }
        });
    };
};
exports.transformObjectExpression = transformObjectExpression;
