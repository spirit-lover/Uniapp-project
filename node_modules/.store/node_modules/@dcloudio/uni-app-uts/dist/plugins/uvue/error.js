"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createRollupError = void 0;
const uni_cli_shared_1 = require("@dcloudio/uni-cli-shared");
function createRollupError(id, error, source) {
    const { message, name, stack } = error;
    const rollupError = {
        id,
        plugin: 'vue',
        message,
        name,
        stack,
    };
    if ('code' in error && error.loc) {
        rollupError.loc = {
            file: id,
            line: error.loc.start.line,
            column: error.loc.start.column,
        };
        if (source && source.length > 0) {
            const { start, end } = (0, uni_cli_shared_1.locToStartAndEnd)(source, error.loc);
            rollupError.frame = (0, uni_cli_shared_1.generateCodeFrame)(source, start, end);
        }
    }
    return rollupError;
}
exports.createRollupError = createRollupError;
